const e="ResizeObserver"in window;let t=e?window.ResizeObserver:class{constructor(e){this._request=0,this._callback=e}disconnect(){}observe(){window.cancelAnimationFrame(this._request),this._request=window.requestAnimationFrame(this._callback)}unobserve(){}};function r(r){e||"function"==typeof r&&(t=r)}function s(e,t){if(Boolean(t)&&t.constructor===Object)for(const r of Object.keys(t))e.options[r]=t[r]}const o="scrollBehavior"in document.documentElement.style;class l{constructor(e){let r;if(this.scrollListener=()=>{const e=this.wrapper.classList;e[this.scrollPosition<this.overflowSize?"add":"remove"](this._fadeEnd),e[this.scrollPosition>0?"add":"remove"](this._fadeStart)},e instanceof HTMLElement)r=e;else{try{r=document.querySelector(e)}catch(t){throw new SyntaxError(`'${JSON.stringify(e)}' is not a valid selector`)}if(null===r)throw new Error(`Cannot find an element matching the selector '${e}'`)}if(null===r.parentNode)throw new Error("Provided element does not have a parent");r.classList.add("fade-scroll__content");const s=document.createElement("div");s.className="fade-scroll";const o=document.createElement("div");o.className="fade-scroll__scrollbar",s.appendChild(o),r.parentNode.insertBefore(s,r),o.appendChild(r),this.content=r,this.scrollBar=o,this.wrapper=s,this._observer=new t(this.scrollListener),this.addScrollListener(this.scrollListener)}get overflowSize(){return this.contentSize-this.wrapperSize}mount(){return this._observer.observe(this.wrapper),this._observer.observe(this.content),this}addScrollListener(e){this.scrollBar.addEventListener("scroll",e)}removeScrollListener(e){this.scrollBar.removeEventListener("scroll",e)}}class i extends l{constructor(e,t){var r;super(e),this.wheelListener=e=>{0!==e.deltaY&&(e.preventDefault(),this.scrollBar.scrollLeft+=e.deltaY)},this.wrapper.classList.add("fade-scroll--horizontal"),this._fadeStart="left-overflow",this._fadeEnd="right-overflow",this.options=(r=this,Object.seal({_hideScrollbar:!1,get hideScrollbar(){return this._hideScrollbar},set hideScrollbar(e){this._hideScrollbar=Boolean(e),r.wrapper.style.height=e?`${r.content.offsetHeight}px`:""},_captureWheel:!1,get captureWheel(){return this._captureWheel},set captureWheel(e){this._captureWheel=Boolean(e),r.scrollBar.onwheel=e?r.wheelListener:null}})),void 0!==t&&s(this,t)}get contentSize(){return this.content.offsetWidth}get wrapperSize(){return this.wrapper.offsetWidth}get scrollPosition(){return this.scrollBar.scrollLeft}set scrollPosition(e){o?this.scrollBar.scroll({left:e,behavior:"smooth"}):this.scrollBar.scrollLeft=e}destroy(){this.scrollBar.removeEventListener("scroll",this.scrollListener),this.scrollBar.onwheel=null,this.wrapper.classList.remove(this._fadeStart,this._fadeEnd),this._observer.disconnect()}}class n extends l{constructor(e,t){var r;super(e),this.wrapper.classList.add("fade-scroll--vertical"),this._fadeStart="top-overflow",this._fadeEnd="bottom-overflow",this.options=(r=this,Object.seal({_hideScrollbar:!1,get hideScrollbar(){return this._hideScrollbar},set hideScrollbar(e){this._hideScrollbar=Boolean(e),r.scrollBar.style.width=this._hideScrollbar?`calc(100% + ${r.wrapper.offsetWidth-r.content.offsetWidth}px)`:""}})),void 0!==t&&s(this,t)}get contentSize(){return this.content.offsetHeight}get wrapperSize(){return this.wrapper.offsetHeight}get scrollPosition(){return this.scrollBar.scrollTop}set scrollPosition(e){o?this.scrollBar.scroll({top:e,behavior:"smooth"}):this.scrollBar.scrollTop=e}destroy(){this.scrollBar.removeEventListener("scroll",this.scrollListener),this.wrapper.classList.remove(this._fadeStart,this._fadeEnd),this._observer.disconnect()}}export{i as Horizontal,n as Vertical,r as setResizeObserver};
